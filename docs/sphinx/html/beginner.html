<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Beginner’s guide &mdash; Seamless 0.10 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Seamless explained" href="explained.html" />
    <link rel="prev" title="Getting started with Seamless" href="getting-started.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Seamless
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="whatis.html">Seamless: a cell-based interactive workflow framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting started with Seamless</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Beginner’s guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#learning-the-basics">Learning the basics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#basic-seamless-features">Basic Seamless features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mounting-a-cell-to-the-file-system">Mounting a cell to the file system</a></li>
<li class="toctree-l3"><a class="reference internal" href="#programming-in-two-places">Programming in two places</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#example-1">Example 1</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-2">Example 2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#sharing-a-cell-over-http">Sharing a cell over HTTP</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dependency-graphs">Dependency graphs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#dividing-the-work-into-phases">Dividing the work into phases</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#design-phase">Design phase</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#abstract-dependency-graph">Abstract dependency graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="#concrete-dependency-graph">Concrete dependency graph</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#implementation-phase">Implementation phase</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#creating-an-new-project">Creating an new project</a></li>
<li class="toctree-l4"><a class="reference internal" href="#starting-the-implementation">Starting the implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#examples-of-porting-existing-workflows">Examples of porting existing workflows</a></li>
<li class="toctree-l4"><a class="reference internal" href="#porting-an-existing-command-line-workflow">Porting an existing command line workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="#monitoring-debugging">Monitoring / debugging</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-keep-it-simple">How to keep it simple</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#keep-it-simple">Keep it simple</a></li>
<li class="toctree-l3"><a class="reference internal" href="#simple-cells">Simple cells</a></li>
<li class="toctree-l3"><a class="reference internal" href="#simple-web-interfaces">Simple web interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="#simple-deployment">Simple deployment</a></li>
<li class="toctree-l3"><a class="reference internal" href="#simple-features">Simple features</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#do-s-and-don-ts">Do’s and don’ts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#do-write-reproducible-code">Do write reproducible code</a></li>
<li class="toctree-l3"><a class="reference internal" href="#don-t-confuse-files-and-cell-names">Don’t confuse files and cell names</a></li>
<li class="toctree-l3"><a class="reference internal" href="#don-t-rely-on-file-names-or-urls">Don’t rely on file names or URLs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="explained.html">Seamless explained</a></li>
<li class="toctree-l1"><a class="reference internal" href="new-project.html">Seamless projects</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Seamless features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="context.html">Contexts</a></li>
<li class="toctree-l1"><a class="reference internal" href="cell.html">Cells</a></li>
<li class="toctree-l1"><a class="reference internal" href="transformer.html">Transformers</a></li>
<li class="toctree-l1"><a class="reference internal" href="mounting.html">Mounting to the file system</a></li>
<li class="toctree-l1"><a class="reference internal" href="shareserver.html">The Seamless shareserver</a></li>
<li class="toctree-l1"><a class="reference internal" href="help.html">The help system</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualization.html">Visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="validation.html">Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="libraries.html">Libraries and libinstances</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="environments.html">Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_storage.html">Data storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="job_management.html">Job management</a></li>
<li class="toctree-l1"><a class="reference internal" href="deployment.html">Deployment</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="deepcell.html">Deep cells</a></li>
<li class="toctree-l1"><a class="reference internal" href="low_level.html">Macros and the low level</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">stdlib documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="stdlib/merge.html">stdlib.merge</a></li>
<li class="toctree-l1"><a class="reference internal" href="stdlib/select.html">stdlib.select</a></li>
<li class="toctree-l1"><a class="reference internal" href="stdlib/switch.html">stdlib.switch</a></li>
<li class="toctree-l1"><a class="reference internal" href="stdlib/instantiate.html">stdlib.instantiate</a></li>
<li class="toctree-l1"><a class="reference internal" href="stdlib/map_dict.html">stdlib.map.map_dict</a></li>
<li class="toctree-l1"><a class="reference internal" href="stdlib/map_dict_chunk.html">stdlib.map.map_dict_chunk</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Seamless</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Beginner’s guide</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/beginner.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="beginner-s-guide">
<h1>Beginner’s guide<a class="headerlink" href="#beginner-s-guide" title="Permalink to this heading"></a></h1>
<p>If you are beginner in programming, you focus on one thing at a time. However, Seamless is very non-linear: you can change anything at any time, interactively. If that makes you feel lost, this guide can give you a sense of direction.</p>
<p>The most important guidelines for beginners are: “learn the basics”, “keep it simple”, and “one thing after another”. The guide consists of one section for each guideline, followed by general guidelines and troubleshooting.</p>
<p><em><strong>Disclaimer</strong>: this guide is by definition a rather patronizing document. If you are an experienced developer, you can skim or skip it altogether: the <a class="reference external" href="http://sjdv1982.github.io/seamless/sphinx/html/explained.html">next section</a> will be more useful to you. In any case, feel free to ignore every guideline that doesn’t apply to you. If you believe that the guide contains bad advice (i.e. guidelines that shouldn’t apply to <strong>anyone</strong>), you are very welcome to propose improvements</em>.</p>
<section id="learning-the-basics">
<h2>Learning the basics<a class="headerlink" href="#learning-the-basics" title="Permalink to this heading"></a></h2>
<section id="basic-seamless-features">
<h3>Basic Seamless features<a class="headerlink" href="#basic-seamless-features" title="Permalink to this heading"></a></h3>
<p><em><strong>IMPORTANT: This documentation section is a draft. The preliminary text is shown below</strong></em></p>
<p>The basic Seamless features are contexts, cells and transformers. See the <a class="reference external" href="http://sjdv1982.github.io/seamless/sphinx/html/introduction.html#basic-example">basic example</a> for a demonstration.</p>
<p>Contexts contain cells, transformers and other contexts. The whole Seamless workflow is a context.</p>
<p>Cells contain data or code.</p>
<p>Transformers perform a data transformation (computation), with cells as input, and one cell as the output. One of the input cells must be a code cell.</p>
<p>Seamless workflows are created in Python. This can be done in a Python script, but normally it is done interactively, in IPython or Jupyter. Here, new cells, transformers and their connections are created. The workflow remains running all the time.</p>
<p>You can save the entire workflow to a file, and then load it back. Workflows (<code class="docutils literal notranslate"><span class="pre">.seamless</span></code> files) are very small, because they contain only checksums. The underlying code data must be stored elsewhere. By default, it is stored as files inside the <code class="docutils literal notranslate"><span class="pre">vault/</span></code> folder.</p>
</section>
<section id="mounting-a-cell-to-the-file-system">
<h3>Mounting a cell to the file system<a class="headerlink" href="#mounting-a-cell-to-the-file-system" title="Permalink to this heading"></a></h3>
<p><em><strong>IMPORTANT: This documentation section is a stub.</strong></em></p>
<!-- This is just an aide to make it easier for you to edit a cell's data or code. It doesn't play any role in the execution of the workflow.
(block vs function (object))
--></section>
<section id="programming-in-two-places">
<h3>Programming in two places<a class="headerlink" href="#programming-in-two-places" title="Permalink to this heading"></a></h3>
<p>With Seamless, there is programming in two places. First, there is the “outside”: the Jupyter or IPython shell where the Seamless workflow is being created interactively. Here you enter Python code that does something with the workflow, for example: adding a new Seamless cell, changing a value, creating a connection, printing a status or a result, etc.</p>
<p>In addition, there is code on the “inside”, code that is part of the workflow. This code is executed by Seamless, in reaction to changes in one of its inputs. In the example below, the inside code is written in an R file.</p>
<section id="example-1">
<h4>Example 1<a class="headerlink" href="#example-1" title="Permalink to this heading"></a></h4>
<section id="aspercent-r-inside-code">
<h5>asPercent.R: “inside” code<a class="headerlink" href="#aspercent-r-inside-code" title="Permalink to this heading"></a></h5>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="n">asPercent</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">function</span><span class="p">(</span><span class="n">x</span><span class="p">){</span>
<span class="w"> </span><span class="n">percent</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">round</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="n">digits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span>
<span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">paste</span><span class="p">(</span><span class="n">percent</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;%&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">sep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">)</span>
<span class="w"> </span><span class="nf">return</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">frac</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">b</span>
<span class="n">result</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">asPercent</span><span class="p">(</span><span class="n">frac</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="example-ipynb-outside-code">
<h5>example.ipynb: “outside” code<a class="headerlink" href="#example-ipynb-outside-code" title="Permalink to this heading"></a></h5>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ctx</span><span class="o">.</span><span class="n">asPercent</span> <span class="o">=</span> <span class="n">Transformer</span><span class="p">()</span>
<span class="n">ctx</span><span class="o">.</span><span class="n">asPercent</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="mi">22</span>
<span class="n">ctx</span><span class="o">.</span><span class="n">asPercent</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="mi">7</span>
<span class="n">ctx</span><span class="o">.</span><span class="n">asPercent</span><span class="o">.</span><span class="n">language</span> <span class="o">=</span> <span class="s2">&quot;r&quot;</span>
<span class="n">ctx</span><span class="o">.</span><span class="n">asPercent</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;asPercent.R&quot;</span><span class="p">)</span>

<span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">computation</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">asPercent</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;Silk: 314.3% &gt;
</pre></div>
</div>
<p>Concretely, what this means in the example above is that the pins (<code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code> and <code class="docutils literal notranslate"><span class="pre">result</span></code>) are the only way that the “inside” and the “outside” code can communicate. For the rest, the “inside” code has no access to “outside” code variables such as <code class="docutils literal notranslate"><span class="pre">ctx</span></code>. And the “outside” code has no access to “inside” code variables such as <code class="docutils literal notranslate"><span class="pre">frac</span></code> and <code class="docutils literal notranslate"><span class="pre">percent</span></code>. This is not difficult to see: after all, the inside code is in a different file, and written in a different language (R for the inside, Python for the outside). But now, consider a second example that does exactly the same thing:</p>
</section>
</section>
<section id="example-2">
<h4>Example 2<a class="headerlink" href="#example-2" title="Permalink to this heading"></a></h4>
<section id="example-ipynb-both-outside-and-inside-code">
<h5>example.ipynb: both “outside” and “inside” code<a class="headerlink" href="#example-ipynb-both-outside-and-inside-code" title="Permalink to this heading"></a></h5>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="c1"># inside code</span>
<span class="k">def</span> <span class="nf">asPercent</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="n">frac</span> <span class="o">=</span> <span class="n">a</span> <span class="o">/</span> <span class="n">b</span>
    <span class="n">percent</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">frac</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">%&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">percent</span><span class="p">)</span>

<span class="c1"># outside code</span>
<span class="n">ctx</span><span class="o">.</span><span class="n">asPercent</span> <span class="o">=</span> <span class="n">asPercent</span>
<span class="n">ctx</span><span class="o">.</span><span class="n">asPercent</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="mi">22</span>
<span class="n">ctx</span><span class="o">.</span><span class="n">asPercent</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="mi">7</span>

<span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">computation</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">asPercent</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;Silk: 314.3% &gt;
</pre></div>
</div>
<p>The exact same boundaries between inside and outside code as in the first example apply: inside and outside code can’t access each other’s variables, the only thing that is shared are <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code> and <code class="docutils literal notranslate"><span class="pre">result</span></code>. The <em>reason</em> why is that inside code must be reproducible, giving always the same result no matter what the outside code is. But it is much less obvious here than in the first example, because of the single-file single-language implementation. Seamless gives you the choice if you want to mount your code to an external file or not. Regarding language, “outside” code is always in Python (or IPython). However, “inside” code <em>can</em> be in Python, but it doesn’t have to be. Seamless supports many programming languages: bash, Python, and C/C++ are well-tested. Other languages such as R, Cython, Fortran or Go are also supported, but less well-tested (and may require a bit more setup). As a beginner, it is recommended to stick to transformers written in Python or bash. Or perhaps simple R code, as the first example shows.</p>
</section>
</section>
</section>
<section id="sharing-a-cell-over-http">
<h3>Sharing a cell over HTTP<a class="headerlink" href="#sharing-a-cell-over-http" title="Permalink to this heading"></a></h3>
<p><em><strong>IMPORTANT: This documentation section is a stub.</strong></em></p>
</section>
<section id="dependency-graphs">
<h3>Dependency graphs<a class="headerlink" href="#dependency-graphs" title="Permalink to this heading"></a></h3>
<p><em><strong>IMPORTANT: This documentation section is an outline. The outline is shown below</strong></em></p>
<p>Seamless workflows are dependency graphs.</p>
<!--

- *Dependency graph*. Which data depends on which transformation? Which transformation depends on which data?

- *Topology*. The full dependency graph including connections, cell types, formats, programming languages, and other details that are necessary to make the flow of the data well-defined.
NOTE TO SELF: to make sense of "programming in two places" and "new-project".

- *Code and input parameters*. Together, ... TODO ... these are the inputs that are not user-defined, i.e. their content must be specified.
--><p>Transformations depend on cells, and some cells depend on transformations. Other cells are <em>independent</em>, they just contain a parameter or a piece of code.Independent cells can be modified, dependent cells cannot.</p>
<!--

- The *topology* corresponds to the concrete dependency graph of the previous section. It is defined by modifying the Seamless graph. This is done from IPython and/or Jupyter, as shown in the [basic example](http://sjdv1982.github.io/seamless/sphinx/html/introduction.html#basic-example).

- *Code and parameters* are defined as cell checksums in the Seamless graph. However, during development it is common to link them to files, and let the files have priority over the graph in case of a conflict. The files should be under version control (Git).

- *Deployment*. Where will each transformation run? What are the resource limits? Where is the data stored, and for how long?
--><!--
- *Monitoring*. Execution status, progress, error messages.

- *User experience (UX)*. Web forms/widgets for the input. Visualization of the output.


--></section>
</section>
<section id="dividing-the-work-into-phases">
<h2>Dividing the work into phases<a class="headerlink" href="#dividing-the-work-into-phases" title="Permalink to this heading"></a></h2>
<p>If you like to explore first and make design decisions later, Seamless may suit your style, even if you are a beginner. However, if you feel lost, it is recommended to plan ahead, and divide the work into phases that you complete one after another. This gives you an idea of what you should do at the moment. But don’t hesitate to go back to a previous phase at any time when you feel that it needs to be corrected.</p>
<p>The following phases are recommended: design, implementation, visualization, validation, deployment. For validation, see the <a class="reference external" href="http://sjdv1982.github.io/seamless/sphinx/html/validation.html">validation documentation</a>; you can choose to skip it for simple projects.</p>
<section id="design-phase">
<h3>Design phase<a class="headerlink" href="#design-phase" title="Permalink to this heading"></a></h3>
<p>Designing a workflow must be done outside of Seamless, as Seamless does not (yet) support any kind of visual programming. It involves drawing a dependency graph, first in an abstract sense, then concretely.</p>
<section id="abstract-dependency-graph">
<h4>Abstract dependency graph<a class="headerlink" href="#abstract-dependency-graph" title="Permalink to this heading"></a></h4>
<p>The goal of this phase is to describe your entire computation as a workflow in an abstract way. First, divide your computation into different steps. Put the steps in order. Such a linear sequence of steps is the simplest possible workflow. Most of the time, your workflow is non-linear: for example, step 3 may not require step 2 to be complete, only step 1. In other words, step 3 depends on step 1, and step 2 depends on step 1, but step 3 does not depend on step 2. Draw a flowchart, consisting of all of the steps and their dependencies. Give names to the steps, and also enumerate their inputs and outputs. If step 3 depends on step 1, indicate if step 3 needs the entire output or only part of it. Once you have done this, your flowchart is now essentially a <em>dependency graph</em>.</p>
<p>You must avoid cyclic dependencies in your graph, i.e. computations that (directly or indirectly) have their own output as input. This happens if your workflow has several iterations where the same steps are being performed with the output of the previous iteration. Seamless has support for cyclic dependencies, but such workflows are not for beginners.</p>
</section>
<section id="concrete-dependency-graph">
<h4>Concrete dependency graph<a class="headerlink" href="#concrete-dependency-graph" title="Permalink to this heading"></a></h4>
<p>Once you have a dependency graph, try to make it as concrete as possible. Formulate every computation as a block with one code input, several data/parameter inputs, and one data output. (You can have multiple data outputs, although the implementation will then be a little bit more complex, using Seamless structured cells). Decide the programming language for each block. Choose names for each input. These computation blocks will later become Seamless transformers. The inputs and outputs will become cells.</p>
<p>Seamless is very strict about dependencies. If your computation consists of shell commands, make sure that you understand their inputs and outputs. Normal shell commands may implicitly assume that a certain package is installed, or that certain files are present. In contrast, Seamless transformations are executed in isolation: if there is any implicit dependency, they will loudly fail. This is considered a good thing, because it detects problems in reproducibility. For reproducible computations, all inputs and outputs (no matter if they are files or Seamless cells) must be carefully enumerated. If not, your workflow may work on your computer, but nowhere else. With Seamless, it will probably work not at all.</p>
<p>If you can avoid the above problem, and if you are porting an existing workflow (bash, Jupyter, Snakemake) that is not too complex, you could skip the concrete dependency graph and move straight to the implementation.</p>
</section>
</section>
<section id="implementation-phase">
<h3>Implementation phase<a class="headerlink" href="#implementation-phase" title="Permalink to this heading"></a></h3>
<p>Here, the design is implemented in Seamless.</p>
<section id="creating-an-new-project">
<h4>Creating an new project<a class="headerlink" href="#creating-an-new-project" title="Permalink to this heading"></a></h4>
<p><em><strong>IMPORTANT: This documentation section is an outline. The outline is shown below</strong></em></p>
<p>… TODO … (choose PROJDIR and PROJNAME, bash snippet)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>activate<span class="w"> </span>seamless
...
</pre></div>
</div>
</section>
<section id="starting-the-implementation">
<h4>Starting the implementation<a class="headerlink" href="#starting-the-implementation" title="Permalink to this heading"></a></h4>
<p><em><strong>IMPORTANT: This documentation section is a stub.</strong></em></p>
<!--
... (seamless-jupyter-trusted) ...
--></section>
<section id="examples-of-porting-existing-workflows">
<h4>Examples of porting existing workflows<a class="headerlink" href="#examples-of-porting-existing-workflows" title="Permalink to this heading"></a></h4>
<p>If you are a beginner, the implementation phase is much simpler if you are starting from an existing workflow. There are two examples of how to do that for a workflow that has been already defined in a Jupyter notebook. In both cases, an interactive web interface is built as well.</p>
<ul class="simple">
<li><p>The <a class="reference external" href="https://github.com/sjdv1982/seamless/tree/stable/examples/webserver-example">webserver-example</a> starts from an existing workflow that is mixed, with some steps in bash and others in Python. A new Seamless project has already been created.</p></li>
<li><p>The <a class="reference external" href="https://github.com/sjdv1982/seamless/tree/stable/examples/webserver-demo">webserver-demo</a> shows how to port a pure-Python workflow to Seamless. NOTE: This is a self-contained notebook that creates a new Seamless project by itself. You should not do that, instead you should create a new Seamless project yourself (see above).</p></li>
</ul>
</section>
<section id="porting-an-existing-command-line-workflow">
<h4>Porting an existing command line workflow<a class="headerlink" href="#porting-an-existing-command-line-workflow" title="Permalink to this heading"></a></h4>
<p>Dependency graphs are most straightforward if you are starting from an existing workflow consisting of command line tools, where all inputs and outputs are files. In many cases, such a workflow will have been implemented as a linear bash script. However, there several frameworks that specialize in such workflows, such as Snakemake and NextFlow. You could implement your workflow initially using one of these frameworks, and then port it to Seamless to add an interactive web interface, monitoring and visualization. For Snakemake, there is an automatic converter (see <a class="reference external" href="https://github.com/sjdv1982/seamless/tree/stable/examples/snakemake-tutorial">example</a>), although it doesn’t support all Snakemake features.</p>
<p>Each computation wraps a single bash command that invokes a single command line tool, or a small list of commands. In Seamless, such a computation will be a bash transformer (<a class="reference external" href="https://github.com/sjdv1982/seamless/blob/stable/tests/highlevel/bash.py">example</a>) that may have a Docker image (<a class="reference external" href="https://github.com/sjdv1982/seamless/blob/stable/tests/highlevel/docker_.py">example</a>). In this case, the transformer will have a code cell written in bash, and the result must be written to the file <code class="docutils literal notranslate"><span class="pre">RESULT</span></code>. For multiple outputs, create a directory <code class="docutils literal notranslate"><span class="pre">RESULT</span></code> instead. Within a bash transformer, every input pin X is available as file X. Small inputs are also accessible as a variable $X. After execution, all files are deleted.</p>
<p>There are two strategies to define a command-line transformation.</p>
<ol class="simple">
<li><p>The best way is use a bash transformer where you include the source code of every command line tool that is being used (except standard UNIX commands). This will make the transformation reproducible. There are two limitations:</p>
<ul class="simple">
<li><p>The command line tool must not have any hard-coded “magic files” where it depends on, unless the content of such a file can be included as one of the transformer inputs.</p></li>
<li><p>If the command line tool is written in a compiled language, things become quite difficult. Seamless has compiled transformers, but they assume that data is exchanged as function arguments, and not via the file system. As a beginner, you are not recommended to use compiled transformers.</p></li>
</ul>
</li>
<li><p>The alternative is to treat a command line tool as part of the environment. In that case, define a Docker image, where the command line tool must be installed. This is appropriate if the command line tool is immutable over the course of the project. You may also be forced to go this route if you run into the limitations above. Any magic files must be installed in the Docker container.</p></li>
</ol>
</section>
<section id="monitoring-debugging">
<h4>Monitoring / debugging<a class="headerlink" href="#monitoring-debugging" title="Permalink to this heading"></a></h4>
<p><em><strong>IMPORTANT: This documentation section is a draft. The preliminary text is shown below</strong></em></p>
<ul class="simple">
<li><p><em>Monitoring</em> is not part of the graph. In IPython/Jupyter, you can interactively access <code class="docutils literal notranslate"><span class="pre">Context.status</span></code> ,  <code class="docutils literal notranslate"><span class="pre">Cell.status</span></code> and <code class="docutils literal notranslate"><span class="pre">Transformer.status</span></code> , as well as <code class="docutils literal notranslate"><span class="pre">Cell.exception</span></code> and <code class="docutils literal notranslate"><span class="pre">Transformer.exception</span></code>. You can monitor this in the browser… TODO</p></li>
</ul>
<p>In addition, you can get the stdout and stderr of a transformer using <code class="docutils literal notranslate"><span class="pre">Transformer.logs</span></code>.</p>
<p>Use the monitor graph, inspect error messages.
Same message can be obtained by:
<code class="docutils literal notranslate"><span class="pre">Transformer.status</span></code> (i.e. typing <code class="docutils literal notranslate"><span class="pre">ctx.tf.status</span></code> in Jupyter for a transformer named <code class="docutils literal notranslate"><span class="pre">ctx.tf</span></code>), <code class="docutils literal notranslate"><span class="pre">Transformer.exception</span></code>, or <code class="docutils literal notranslate"><span class="pre">Transformer.log</span></code>. You can also link it to a Jupyter output cell (TODO).</p>
<p><code class="docutils literal notranslate"><span class="pre">Transformer.result.value.unsilk</span></code> …</p>
<p>Use simple print statements to debug.</p>
<p>ADVANCED: Environment =&gt; install package =&gt; clear_exception</p>
</section>
</section>
</section>
<section id="how-to-keep-it-simple">
<h2>How to keep it simple<a class="headerlink" href="#how-to-keep-it-simple" title="Permalink to this heading"></a></h2>
<p><em><strong>IMPORTANT: This documentation section is an outline. The outline is shown below</strong></em></p>
<p>TODO: merging the next section into here…</p>
<ul class="simple">
<li><p>Keep it simple (link): create a new project, use Jupyter</p></li>
<li><p>Children, tab completion.</p></li>
<li><p>Link to web status (point out: if using project)</p></li>
<li><p>Translate and compute and asynchronous. <code class="docutils literal notranslate"><span class="pre">await</span> <span class="pre">ctx.translation()</span></code> and <code class="docutils literal notranslate"><span class="pre">await</span> <span class="pre">ctx.computation()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">await</span> <span class="pre">load()</span></code> and <code class="docutils literal notranslate"><span class="pre">save()</span></code></p></li>
</ul>
<section id="keep-it-simple">
<h3>Keep it simple<a class="headerlink" href="#keep-it-simple" title="Permalink to this heading"></a></h3>
<p>Do simple things that run fast.</p>
<p>Don’t worry about deployment. Use seamless-new-project, no database, no jobless.</p>
<p>Use Jupyter</p>
<p>Status graph is your friend</p>
<p>Else you have to rely on:</p>
<ul class="simple">
<li><p>The .status attribute</p></li>
<li><p>.exception</p></li>
<li><p>logs</p></li>
</ul>
<!--
### Getting help

(TODO when the help system has more entries)

help(...) and .?
Again, status graph is your friend
 TODO: add more .help, especially to graph / stdlib
!--></section>
<section id="simple-cells">
<h3>Simple cells<a class="headerlink" href="#simple-cells" title="Permalink to this heading"></a></h3>
<p><em><strong>IMPORTANT: This documentation section is a stub.</strong></em></p>
<!--
STUB. Discuss structured cells and celltype.

#### Structured cells

Subcell access. ...
(multiple outputs)
(example with attribute access, then example with numeric index)
The other major feature is that you can add schemas for data validation, but this is more advanced.
...
--></section>
<section id="simple-web-interfaces">
<h3>Simple web interfaces<a class="headerlink" href="#simple-web-interfaces" title="Permalink to this heading"></a></h3>
<p><em><strong>IMPORTANT: This documentation section is a stub.</strong></em></p>
<!-- TODO:  Discuss browser URL vs web form. Discuss making it work vs making it pretty. Link to visualization, recommend to read it. --></section>
<section id="simple-deployment">
<h3>Simple deployment<a class="headerlink" href="#simple-deployment" title="Permalink to this heading"></a></h3>
<p><em><strong>IMPORTANT: This documentation section is a stub.</strong></em></p>
<!-- TODO (based on serve-graph, sharing the .seamless and zip). --></section>
<section id="simple-features">
<h3>Simple features<a class="headerlink" href="#simple-features" title="Permalink to this heading"></a></h3>
<p>Seamless is more than just cells, transformers and contexts. But as a beginner, you are recommended to stick to them. Once you feel comfortable, you could then learn <a class="reference external" href="http://sjdv1982.github.io/seamless/sphinx/html/validation.html">validation</a>, using <a class="reference external" href="http://sjdv1982.github.io/seamless/sphinx/html/libraries.html">libraries</a>, or <a class="reference external" href="http://sjdv1982.github.io/seamless/sphinx/html/debugging.html">debugging</a>. Other Seamless features are better suited for experienced programmers. In particular, as a beginner, you should stay away from macros and the low level. In addition, <a class="reference external" href="http://sjdv1982.github.io/seamless/sphinx/html/deepcell.html">deep cells</a> must be used with caution, as mistakes may lead to massive use of memory, disk space and/or download bandwidth. In the future, it may be possible to configure Seamless such that manual confirmation is required before massive resources are being claimed via deep cells.</p>
</section>
</section>
<section id="do-s-and-don-ts">
<h2>Do’s and don’ts<a class="headerlink" href="#do-s-and-don-ts" title="Permalink to this heading"></a></h2>
<section id="do-write-reproducible-code">
<h3>Do write reproducible code<a class="headerlink" href="#do-write-reproducible-code" title="Permalink to this heading"></a></h3>
<p><em><strong>IMPORTANT: This documentation section is a stub.</strong></em></p>
<!--
Intro:
- Deterministic code
- Import inside code. No variable dependencies.
- Transformers perfect isolation. Imagine being executed on a different computer (sometimes they are!). The Jupyter notebook is not there to write plots to. Don't rely on external files that exist only on your computer. Files that you create will no longer be there after the transformation has ended, unless you write it to the RESULT folder.
- Seamless dislikes files:
    - Filename in bash transformer
    - Filename in share
    - Filename in mount
--></section>
<section id="don-t-confuse-files-and-cell-names">
<h3>Don’t confuse files and cell names<a class="headerlink" href="#don-t-confuse-files-and-cell-names" title="Permalink to this heading"></a></h3>
<p><em><strong>IMPORTANT: This documentation section is an outline. The outline is shown below</strong></em>
…
Don’t confuse “inside” files and “outside” files.
“outside” files: mounted.
“inside” files: alternative syntax for cells or for pins (good idea for bash transformers).
Finally, .share as “file.txt” is clean but does not have any effect.
Set mimetype!</p>
</section>
<section id="don-t-rely-on-file-names-or-urls">
<h3>Don’t rely on file names or URLs<a class="headerlink" href="#don-t-rely-on-file-names-or-urls" title="Permalink to this heading"></a></h3>
<p>Don’t put file names as strings inside cells, and don’t use file names in transformation code. Doing so makes your workflow non-reproducible. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Non-reproducible code!</span>
<span class="n">ctx</span><span class="o">.</span><span class="n">tf</span> <span class="o">=</span> <span class="n">Transformer</span><span class="p">()</span>
<span class="n">ctx</span><span class="o">.</span><span class="n">tf</span><span class="o">.</span><span class="n">language</span> <span class="o">=</span> <span class="s2">&quot;bash&quot;</span>
<span class="n">ctx</span><span class="o">.</span><span class="n">tf</span><span class="o">.</span><span class="n">inputfile</span> <span class="o">=</span> <span class="s2">&quot;/home/user/file.txt&quot;</span>
<span class="n">ctx</span><span class="o">.</span><span class="n">tf</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="s2">&quot;wc -l $inputfile&quot;</span>
</pre></div>
</div>
<p>Here, whenever someone or something changes the content of <code class="docutils literal notranslate"><span class="pre">/home/user/file.txt</span></code>, the result of <code class="docutils literal notranslate"><span class="pre">ctx.tf</span></code> will change. However, since the value of the input is still the same (it is still “/home/user/file.txt”), Seamless will never re-run the transformation, and re-use the previously computed result. Therefore, your workflow has become non-reproducible. And even if <code class="docutils literal notranslate"><span class="pre">/home/user/file.txt</span></code> would never change, your workflow is non-reproducible because it is now unportable between one computer and another.
The correct way to set it up is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ctx</span><span class="o">.</span><span class="n">tf</span> <span class="o">=</span> <span class="n">Transformer</span><span class="p">()</span>
<span class="n">ctx</span><span class="o">.</span><span class="n">tf</span><span class="o">.</span><span class="n">language</span> <span class="o">=</span> <span class="s2">&quot;bash&quot;</span>
<span class="n">ctx</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">Cell</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>

<span class="n">ctx</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s2">&quot;/home/user/file.txt&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="c1"># or:</span>
<span class="n">ctx</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;/home/user/file.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>

<span class="n">ctx</span><span class="o">.</span><span class="n">tf</span><span class="o">.</span><span class="n">input</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">c</span>
<span class="n">ctx</span><span class="o">.</span><span class="n">tf</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="s2">&quot;wc -l input&quot;</span>  <span class="c1"># note that there is no $</span>
</pre></div>
</div>
<p>Now the workflow will contain the checksum of “/home/user/file.txt”, but not its file name, and reproducibility is maintained.</p>
<p>The same applies for URLs. Code that downloads from an URL must not be part of transformer code. It should be executed manually in Jupyter, assigning the downloaded data to a cell.</p>
</section>
</section>
<section id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this heading"></a></h2>
<ul>
<li><p><em>Problem: I changed something in the workflow, but nothing seems to happen</em>.</p>
<p>Solution: try to re-translate your workflow. This is necessary after e.g. adding a new cell. Re-translation is done with <code class="docutils literal notranslate"><span class="pre">await</span> <span class="pre">ctx.translation()</span></code>.</p>
</li>
<li><p><em>Problem: error message “cannot mount structured cells”</em>.</p>
<p>Solution: declare a celltype first. For mounting, celltype “text” is often a good choice.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ctx</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">Cell</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
<span class="c1"># or:</span>
<span class="n">ctx</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="s2">&quot;somevalue&quot;</span>
<span class="n">ctx</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">celltype</span> <span class="o">=</span> <span class="s2">&quot;text&quot;</span>

<span class="n">ctx</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;somefile.txt&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Don’t forget to translate after declaring a celltype, with <code class="docutils literal notranslate"><span class="pre">await</span> <span class="pre">ctx.translation()</span></code>.</p>
</li>
<li><p><em>Problem: I am using a cell’s value in other Python code, with strange errors.</em></p>
<p>Solution: by default, cells are “structured”, which wraps the cell value in a “Silk” structure. You can do nice things with a Silk structure, but often you want the raw value instead. In that case, do <code class="docutils literal notranslate"><span class="pre">.value.unsilk</span></code> on a cell. Alternative solution: declare a celltype (see the previous problem). Celltype  “plain” (list, dict, int, float) or <code class="docutils literal notranslate"><span class="pre">&quot;binary&quot;</span></code> (Numpy) does usually what you want. In that case, don’t forget to translate with <code class="docutils literal notranslate"><span class="pre">await</span> <span class="pre">ctx.translation()</span></code>.</p>
</li>
<li><p><em>Problem: Variables and imports missing …</em> .</p>
<p><em><strong>IMPORTANT: This documentation section is a stub.</strong></em></p>
  <!-- Each step runs in isolation. ... --></li>
<li><p><em>Problem</em>: (https://github.com/sjdv1982/seamless/issues/128)</p>
<p><em><strong>IMPORTANT: This documentation section is a stub.</strong></em></p>
</li>
<li><p><em>Problem</em>: (https://github.com/sjdv1982/seamless/issues/56)</p>
<p><em><strong>IMPORTANT: This documentation section is a stub.</strong></em></p>
</li>
<li><p><em>Problem</em>: [error message not kept]</p>
<p><em><strong>IMPORTANT: This documentation section is an early draft. The raw text material is shown below</strong></em></p>
<p>…</p>
<p>If Seamless says that an error message was not kept, simply make
a trivial change to the code (e.g. in Python, adding the word <code class="docutils literal notranslate"><span class="pre">pass</span></code> at the end. In bash, simply add a comment #).</p>
</li>
<li><p><em>Problem</em>: [cachemiss error]</p>
<p><em><strong>IMPORTANT: This documentation section is an early draft. The raw text material is shown below</strong></em></p>
<p>… (Misconfiguration. Save and load… first git commit. vault/*/<name of checksum> in earlier versions)</p>
</li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="getting-started.html" class="btn btn-neutral float-left" title="Getting started with Seamless" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="explained.html" class="btn btn-neutral float-right" title="Seamless explained" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2023, INSERM, CNRS and code contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>