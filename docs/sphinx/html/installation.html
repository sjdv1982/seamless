<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Installation &mdash; Seamless 0.10 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Getting started with Seamless" href="getting-started.html" />
    <link rel="prev" title="Seamless: a cell-based interactive workflow framework" href="whatis.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Seamless
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="whatis.html">Seamless: a cell-based interactive workflow framework</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#quick-installation-for-the-impatient">Quick installation (for the impatient)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#comparison-between-installation-methods">Comparison between installation methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation-instructions">Installation instructions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installation-of-seamless-running-inside-docker-containers">1. Installation of Seamless running inside Docker containers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installation-of-seamless-running-directly-in-a-conda-environment">2. Installation of Seamless running directly in a conda environment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#possible-conda-installations">Possible conda installations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#post-installation">Post-installation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#installation-of-minimal-seamless">3. Installation of minimal Seamless</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#alternative-installation-using-singularity">Alternative installation using Singularity</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting started with Seamless</a></li>
<li class="toctree-l1"><a class="reference internal" href="beginner.html">Beginner’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="explained.html">Seamless explained</a></li>
<li class="toctree-l1"><a class="reference internal" href="new-project.html">Seamless projects</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Seamless features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="context.html">Contexts</a></li>
<li class="toctree-l1"><a class="reference internal" href="cell.html">Cells</a></li>
<li class="toctree-l1"><a class="reference internal" href="transformer.html">Transformers</a></li>
<li class="toctree-l1"><a class="reference internal" href="mounting.html">Mounting to the file system</a></li>
<li class="toctree-l1"><a class="reference internal" href="shareserver.html">The Seamless shareserver</a></li>
<li class="toctree-l1"><a class="reference internal" href="help.html">The help system</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualization.html">Visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="validation.html">Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="libraries.html">Libraries and libinstances</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="environments.html">Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_storage.html">Data storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="job_management.html">Job management</a></li>
<li class="toctree-l1"><a class="reference internal" href="deployment.html">Deployment</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="deepcell.html">Deep cells</a></li>
<li class="toctree-l1"><a class="reference internal" href="low_level.html">Macros and the low level</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">stdlib documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="stdlib/merge.html">stdlib.merge</a></li>
<li class="toctree-l1"><a class="reference internal" href="stdlib/select.html">stdlib.select</a></li>
<li class="toctree-l1"><a class="reference internal" href="stdlib/switch.html">stdlib.switch</a></li>
<li class="toctree-l1"><a class="reference internal" href="stdlib/instantiate.html">stdlib.instantiate</a></li>
<li class="toctree-l1"><a class="reference internal" href="stdlib/map_dict.html">stdlib.map.map_dict</a></li>
<li class="toctree-l1"><a class="reference internal" href="stdlib/map_dict_chunk.html">stdlib.map.map_dict_chunk</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Seamless</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Installation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/installation.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this heading"></a></h1>
<section id="quick-installation-for-the-impatient">
<h2>Quick installation (for the impatient)<a class="headerlink" href="#quick-installation-for-the-impatient" title="Permalink to this heading"></a></h2>
<p>First, <a class="reference external" href="https://docs.docker.com/get-docker/">install Docker</a>
and <a class="reference external" href="https://docs.conda.io/en/latest/miniconda.html">miniconda</a>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>pull<span class="w"> </span>rpbs/seamless
conda<span class="w"> </span>create<span class="w"> </span>-n<span class="w"> </span>seamless<span class="w"> </span>-c<span class="w"> </span>rpbs<span class="w"> </span>-c<span class="w"> </span>conda-forge<span class="w"> </span>seamless-cli<span class="w"> </span>-y
conda<span class="w"> </span>activate<span class="w"> </span>seamless
</pre></div>
</div>
<p><em><strong>These three lines are sufficient to get Seamless working</strong></em></p>
</section>
<section id="comparison-between-installation-methods">
<h2>Comparison between installation methods<a class="headerlink" href="#comparison-between-installation-methods" title="Permalink to this heading"></a></h2>
<p>This paragraph is in case the quick installation does not work for you, or if you want to know first what you are doing.</p>
<p>There are three methods to run Seamless. Below, each of the three methods is briefly explained. The section after provides installation instructions for each of the methods.</p>
<ol>
<li><p>The easiest method is to run Seamless inside Docker containers (the quick installation above). With command-line tools such as <code class="docutils literal notranslate"><span class="pre">seamless-jupyter</span></code>, <code class="docutils literal notranslate"><span class="pre">seamless-bash</span></code> and <code class="docutils literal notranslate"><span class="pre">seamless-ipython</span></code> you can create new Docker containers where you can import Seamless into Jupyter, IPython, etc.</p>
<p>This method will work under any platform where you can install Docker, conda and bash. It has been tested under macOS and Linux. It should also work under Windows with MSYS2.</p>
</li>
<li><p>Alternatively, you can create a conda environment to install Seamless directly, without using Docker. Then, instead of <code class="docutils literal notranslate"><span class="pre">seamless-jupyter</span></code> or <code class="docutils literal notranslate"><span class="pre">seamless-ipython</span></code>, you activate the conda environment and launch Jupyter or IPython yourself. This will work out-of-the-box for many use cases, but sometimes you will have to define some environment variables, especially to connect to a Seamless database or a job servant. Features like live debugging are also harder to set up. Therefore, this is recommended only for advanced users.</p>
<p>This method has been tested under macOS and Linux. As it relies on <code class="docutils literal notranslate"><span class="pre">os.fork()</span></code>, it will not work under Windows.</p>
<p>You will have the choice between several conda environment definitions, on a spectrum between minimalist and maximum compatibility with the Seamless Docker image.</p>
</li>
<li><p>Finally, there is also the seamless-minimal installation method. This is not a real Seamless installation. The aim of seamless-minimal is to act as a <em>service</em> to execute reproducible computations (transformations) inside arbitrary conda environments. These transformations are generated elsewhere, by a full Seamless installation, or by a different reproducible computation framework.</p></li>
</ol>
</section>
<section id="installation-instructions">
<h2>Installation instructions<a class="headerlink" href="#installation-instructions" title="Permalink to this heading"></a></h2>
<section id="installation-of-seamless-running-inside-docker-containers">
<h3>1. Installation of Seamless running inside Docker containers<a class="headerlink" href="#installation-of-seamless-running-inside-docker-containers" title="Permalink to this heading"></a></h3>
<ul>
<li><p>First, you must <a class="reference external" href="https://docs.docker.com/get-docker/">install Docker</a>
and <a class="reference external" href="https://docs.conda.io/en/latest/miniconda.html">(mini)conda</a>.</p></li>
<li><p>Pull the Docker image with <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">pull</span> <span class="pre">rpbs/seamless</span></code></p></li>
<li><p>Install the Seamless command line tools.</p>
<p>It is best to create a new environment “seamless”, and do <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">activate</span> <span class="pre">seamless</span></code> whenever you are using Seamless. This is done as follows: <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">create</span> <span class="pre">-n</span> <span class="pre">seamless</span> <span class="pre">-c</span> <span class="pre">rpbs</span> <span class="pre">-c</span> <span class="pre">conda-forge</span> <span class="pre">seamless-cli</span></code>.</p>
<p>Or you can install the Seamless command line tools into your current conda environment: <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">-c</span> <span class="pre">rpbs</span> <span class="pre">-c</span> <span class="pre">conda-forge</span> <span class="pre">seamless-cli</span></code></p>
</li>
<li><p>The command <code class="docutils literal notranslate"><span class="pre">seamless-ipython</span></code> launches an IPython terminal inside a Seamless Docker container.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">seamless-jupyter</span></code> does the same for Jupyter Notebook. Inside the notebook file tree, browse <code class="docutils literal notranslate"><span class="pre">seamless-examples</span></code>, or <code class="docutils literal notranslate"><span class="pre">cwd</span></code> for the current directory.</p>
</section>
<section id="installation-of-seamless-running-directly-in-a-conda-environment">
<h3>2. Installation of Seamless running directly in a conda environment<a class="headerlink" href="#installation-of-seamless-running-directly-in-a-conda-environment" title="Permalink to this heading"></a></h3>
<p>First, you must <a class="reference external" href="https://docs.conda.io/en/latest/miniconda.html">install (mini)conda</a>.</p>
<p>Then, you must install <code class="docutils literal notranslate"><span class="pre">mamba</span></code> in the base environment. <code class="docutils literal notranslate"><span class="pre">mamba</span></code> is a fast, drop-in replacement for the <code class="docutils literal notranslate"><span class="pre">conda</span></code> command. The Seamless conda environments are big and the default <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">env</span> <span class="pre">create</span></code> command does not handle their dependencies very well.</p>
<p>Then, create a <code class="docutils literal notranslate"><span class="pre">seamless-framework</span></code> conda environment with the following command:</p>
<p><code class="docutils literal notranslate"><span class="pre">mamba</span> <span class="pre">env</span> <span class="pre">create</span> <span class="pre">--force</span> <span class="pre">--file</span> <span class="pre">https://raw.githubusercontent.com/sjdv1982/seamless/stable/conda/&lt;file&gt;.yml</span></code></p>
<p>where <code class="docutils literal notranslate"><span class="pre">&lt;file&gt;.yml</span></code> has one of the values below.</p>
<p>In all cases, a conda environment <code class="docutils literal notranslate"><span class="pre">seamless-framework</span></code> is created. If you want to rename it (e.g. to compare different installations), you can do so with <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">rename</span> <span class="pre">-n</span> <span class="pre">seamless-framework</span> <span class="pre">...</span></code></p>
<section id="possible-conda-installations">
<h4>Possible conda installations<a class="headerlink" href="#possible-conda-installations" title="Permalink to this heading"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">&lt;file&gt;.yml</span></code> can have the following values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">seamless-exact-environment.yml</span></code>. This is the most compatible installation. This specifies the versions of Python and all packages to be exactly the same as in the Docker image. (For Seamless 0.11, this is Python 3.10.9). Note that Seamless is tested only with these package versions. The environment is 1.9 GB in size.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">seamless-framework-environment.yml</span></code>. This installs Python and all packages in the Docker image, but does not specify their versions. As of early 2023, this will install Python 3.11. Note that Seamless is <em>not</em> extensively tested with these Python/package versions: if you encounter a bug, switching to <code class="docutils literal notranslate"><span class="pre">seamless-exact-environment.yml</span></code> may solve it (a bug report is still welcome). The environment is ~2.1 GB in size.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">seamless-mini-environment.yml</span></code>. Same as above, but will omit some packages. Not all Seamless tests and examples will work. Jupyter is no longer installed, and neither are packages such as scikit-learn, scipy, matplotlib or pandas. If you need those packages, you must install them yourself. The environment is ~410 MB in size.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">seamless-micro-environment.yml</span></code>. Same as above, but this will install only the absolute minimum to run (most of) Seamless. As of early 2023, the environment contains 82 packages and is ~330 MB in size.</p></li>
</ul>
</section>
<section id="post-installation">
<h4>Post-installation<a class="headerlink" href="#post-installation" title="Permalink to this heading"></a></h4>
<p>Even with the most compatible installation, making it fully working requires some manual steps.</p>
<ul class="simple">
<li><p>When running compiled transformers, Seamless assumes that gcc (for C), g++ (for C++) and gfortran are available. These are not installed by default. If you wish to run transformers written in these languages, you must install these compilers yourself.</p></li>
<li><p>Most likely, you will want to checkout the <a class="reference external" href="https://github.com/sjdv1982/seamless-tools">seamless-tools Git repo</a>. Almost all Seamless commands are wrappers around Python scripts, either in <code class="docutils literal notranslate"><span class="pre">seamless-tools/scripts</span></code> (these scripts heavily rely on Seamless) or <code class="docutils literal notranslate"><span class="pre">seamless-tools/tools</span></code> (these scripts are mostly independent of Seamless). For example, the command <code class="docutils literal notranslate"><span class="pre">seamless-new-project</span></code> (which can be found in <code class="docutils literal notranslate"><span class="pre">seamless-tools/seamless-cli/seamless-new-project</span></code>) is a wrapper around <code class="docutils literal notranslate"><span class="pre">seamless-tools/scripts/new-project.py</span></code> . You will have to set up (some of) the variables that are normally set up by <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">seamless-tools/seamless-cli/seamless-fill-environment-variables</span></code>. For example, you may need to change SEAMLESS_COMMUNION_IP or SEAMLESS_DATABASE_IP from the Docker host IP into “localhost”. Other tools (e.g. the Seamless database) assume a Docker-mapped directory in their default configurations, this needs to be changed as well.</p></li>
</ul>
</section>
</section>
<section id="installation-of-minimal-seamless">
<h3>3. Installation of minimal Seamless<a class="headerlink" href="#installation-of-minimal-seamless" title="Permalink to this heading"></a></h3>
<p>Installation is as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>pull<span class="w"> </span>rpbs/seamless-minimal
conda<span class="w"> </span>create<span class="w"> </span>-n<span class="w"> </span>seamless<span class="w"> </span>-c<span class="w"> </span>rpbs<span class="w"> </span>-c<span class="w"> </span>conda-forge<span class="w"> </span>seamless-cli<span class="w"> </span>-y
conda<span class="w"> </span>activate<span class="w"> </span>seamless
</pre></div>
</div>
<ul class="simple">
<li><p>Export the main conda environment to an external location with <code class="docutils literal notranslate"><span class="pre">seamless-conda-env-export</span> <span class="pre">SOMEDIR</span></code></p></li>
<li><p>You can update the external conda environment using an environment file (normally, the same file used for Transformer.environment.set_conda) with <code class="docutils literal notranslate"><span class="pre">seamless-conda-env-modify</span> <span class="pre">SOMEDIR</span> <span class="pre">someenv.yml</span></code></p></li>
<li><p>Execute a transformation using <code class="docutils literal notranslate"><span class="pre">seamless-conda-env-run-transformation</span> <span class="pre">SOMEDIR</span> <span class="pre">transformation-checksum</span></code>. The transformation checksum can be obtained using <code class="docutils literal notranslate"><span class="pre">Transformer.get_transformation()</span></code>. This requires a Seamless database to be connected.</p></li>
</ul>
<section id="alternative-installation-using-singularity">
<h4>Alternative installation using Singularity<a class="headerlink" href="#alternative-installation-using-singularity" title="Permalink to this heading"></a></h4>
<p>You can run seamless-minimal also under Singularity instead of Docker.</p>
<p>In that case, checkout the <a class="reference external" href="https://github.com/sjdv1982/seamless-tools">seamless-tools Git repo</a> and follow the instructions in <code class="docutils literal notranslate"><span class="pre">/seamless-tools/seamless-cli-singularity/README.md</span></code></p>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="whatis.html" class="btn btn-neutral float-left" title="Seamless: a cell-based interactive workflow framework" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="getting-started.html" class="btn btn-neutral float-right" title="Getting started with Seamless" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2023, INSERM, CNRS and code contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>